<!DOCTYPE html>
<html lang="vi">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Week 2: Mixed Practice (Vocab & Grammar)</title>
<style>
    :root {
        --primary: #d00000; /* M√†u ƒë·ªè g·∫°ch */
        --secondary: #ffba08; /* M√†u v√†ng ngh·ªá */
        --dark: #370617;
        --light: #fff8f0;
        --boss: #6a040f; /* M√†u Boss cu·ªëi */
    }
    body { font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif; background: var(--light); color: var(--dark); padding: 20px; line-height: 1.6; }
    .container { max-width: 800px; margin: 0 auto; background: white; padding: 40px; border-radius: 20px; box-shadow: 0 10px 25px rgba(0,0,0,0.1); display: none; }
    
    /* Start Screen */
    #start-screen { max-width: 600px; margin: 50px auto; background: white; padding: 40px; text-align: center; border-radius: 20px; box-shadow: 0 10px 25px rgba(0,0,0,0.15); border-top: 10px solid var(--primary); }
    .btn-start { background: var(--primary); color: white; border: none; padding: 15px 40px; font-size: 1.3em; font-weight: bold; border-radius: 50px; cursor: pointer; transition: 0.3s; box-shadow: 0 5px 15px rgba(208, 0, 0, 0.3); }
    .btn-start:hover { transform: translateY(-3px); background: #9d0208; }

    /* Question Cards */
    .question-card { background: #fff; border: 1px solid #eee; border-left: 5px solid var(--secondary); padding: 20px; margin-bottom: 20px; border-radius: 8px; }
    .boss-card { border-left: 5px solid var(--boss); background: #fff0f3; } /* Style cho c√¢u kh√≥ */
    .boss-badge { background: var(--boss); color: white; padding: 2px 8px; border-radius: 4px; font-size: 0.8em; font-weight: bold; margin-bottom: 5px; display: inline-block; }
    
    .question-text { font-size: 1.1em; font-weight: bold; margin-bottom: 15px; display: block; }
    .options label { display: block; margin-bottom: 8px; cursor: pointer; padding: 8px; border-radius: 5px; transition: 0.2s; }
    .options label:hover { background: #fdf0d5; }
    .options input { margin-right: 10px; }

    /* Feedback */
    .feedback { display: none; margin-top: 10px; font-size: 0.95em; padding: 10px; background: #e9ecef; border-radius: 5px; }
    .correct { color: #2a9d8f; font-weight: bold; }
    .wrong { color: #d00000; font-weight: bold; }

    /* Timer */
    #timer-bar { position: fixed; top: 0; left: 0; width: 100%; background: var(--dark); color: white; text-align: center; padding: 10px 0; font-weight: bold; z-index: 1000; display: none; }

    .btn-submit { width: 100%; padding: 15px; background: var(--dark); color: white; border: none; font-size: 1.2em; font-weight: bold; border-radius: 10px; cursor: pointer; margin-top: 20px; }
    .btn-submit:hover { background: #03071e; }

    /* Report */
    #report-area { display: none; margin-top: 30px; border-top: 2px dashed #ccc; padding-top: 20px; }
</style>
</head>
<body>

<div id="timer-bar">TIME: <span id="time">20:00</span></div>

<div id="start-screen">
    <h1>üìö MIXED PRACTICE: WEEK 2</h1>
    <p><b>40 C√¢u h·ªèi | 20 Ph√∫t</b></p>
    <p>N·ªôi dung: T·ª´ v·ª±ng c√¢u chuy·ªán & Ng·ªØ ph√°p Qu√° kh·ª©.</p>
    <p style="color: var(--boss); font-weight: bold;">‚ö†Ô∏è L∆∞u √Ω: 10 c√¢u cu·ªëi l√† V√πng N√¢ng Cao (Advanced Zone)!</p>
    <button class="btn-start" onclick="startQuiz()">B·∫ÆT ƒê·∫¶U</button>
</div>

<div class="container" id="quiz-content">
    <h2 style="text-align: center; color: var(--dark);">B√ÄI T·∫¨P T·ªîNG H·ª¢P</h2>
    <div id="quiz-container"></div>
    <button class="btn-submit" onclick="submitQuiz()">N·ªòP B√ÄI</button>
    
    <div id="report-area">
        <h3>üìä K·∫æT QU·∫¢ CHI TI·∫æT</h3>
        <div id="score-display" style="font-size: 1.5em; font-weight: bold; margin-bottom: 10px;"></div>
        <textarea id="final-report" style="width: 100%; height: 200px; font-family: monospace; padding: 10px;" readonly></textarea>
    </div>
</div>

<script>
    const questions = [
        // --- PART 1: VOCABULARY (Theo c·ªët truy·ªán) ---
        { q: "1. Last week was very _____ because of my work.", opts: ["happy", "stressful", "easy"], a: "stressful", exp: "Stressful (√Åp l·ª±c/Kh·ªßng ho·∫£ng)." },
        { q: "2. My husband's work was _____ up.", opts: ["piling", "running", "going"], a: "piling", exp: "Piling up: Ch·∫•t ƒë·ªëng (C√¥ng vi·ªác g·∫•p r√∫t)." },
        { q: "3. Everything was _____ until we went home.", opts: ["chaotic", "clean", "smooth"], a: "chaotic", exp: "Chaotic: R·ªëi tung/H·ªón lo·∫°n." },
        { q: "4. The washing machine _____ down last Monday.", opts: ["broke", "fell", "dropped"], a: "broke", exp: "Break down: B·ªã h∆∞ h·ªèng." },
        { q: "5. We _____ a new machine immediately.", opts: ["sold", "purchased", "threw"], a: "purchased", exp: "Purchase = Buy (Mua/T·∫≠u)." },
        { q: "6. The weather in the countryside was _____.", opts: ["angry", "pleasant", "stressful"], a: "pleasant", exp: "Pleasant: D·ªÖ ch·ªãu/M√°t m·∫ª." },
        { q: "7. We wanted to _____ the most of our time.", opts: ["do", "make", "take"], a: "make", exp: "C·ª•m: Make the most of (T·∫≠n d·ª•ng t·ªëi ƒëa)." },
        { q: "8. We tried to _____ everything in our life.", opts: ["balance", "break", "stress"], a: "balance", exp: "Balance: C√¢n b·∫±ng." },
        { q: "9. The military service checkup was _____.", opts: ["going", "approaching", "leaving"], a: "approaching", exp: "Approaching: ƒêang ƒë·∫øn g·∫ßn/C·∫≠n k·ªÅ." },
        { q: "10. It was a _____ week, but we are okay now.", opts: ["tough", "smooth", "funny"], a: "tough", exp: "Tough = Difficult (Kh√≥ khƒÉn/Kh·ªßng ho·∫£ng)." },

        // --- PART 2: GRAMMAR (Was/Were vs Did) ---
        { q: "11. I _____ tired yesterday.", opts: ["was", "did", "were"], a: "was", exp: "T√≠nh t·ª´ (Tired) -> D√πng Was." },
        { q: "12. _____ you go to work?", opts: ["Were", "Did", "Was"], a: "Did", exp: "ƒê·ªông t·ª´ (Go) -> D√πng Did." },
        { q: "13. She _____ not cook dinner.", opts: ["did", "was", "were"], a: "did", exp: "ƒê·ªông t·ª´ (Cook) -> D√πng Did not." },
        { q: "14. They _____ at the party last night.", opts: ["did", "were", "went"], a: "were", exp: "·ªû t·∫°i ƒë√¢u (At the party) -> D√πng Were." },
        { q: "15. _____ you happy with the trip?", opts: ["Did", "Were", "Was"], a: "Were", exp: "T√≠nh t·ª´ (Happy) -> D√πng Were." },
        { q: "16. We _____ not buy the car.", opts: ["were", "did", "was"], a: "did", exp: "ƒê·ªông t·ª´ (Buy) -> D√πng Did not." },
        { q: "17. It _____ a sunny day.", opts: ["was", "did", "were"], a: "was", exp: "M√¥ t·∫£ th·ªùi ti·∫øt -> D√πng Was." },
        { q: "18. Why _____ you cry?", opts: ["were", "did", "was"], a: "did", exp: "ƒê·ªông t·ª´ (Cry) -> D√πng Did." },
        { q: "19. My phone _____ broken.", opts: ["was", "did", "were"], a: "was", exp: "T√≠nh t·ª´ (Broken) -> D√πng Was." },
        { q: "20. _____ he tell you the truth?", opts: ["Was", "Were", "Did"], a: "Did", exp: "ƒê·ªông t·ª´ (Tell) -> D√πng Did." },

        // --- PART 3: IRREGULAR VERBS (Chia ƒë·ªông t·ª´) ---
        { q: "21. Last year, I _____ (go) to Japan.", opts: ["goed", "went", "gone"], a: "went", exp: "Go -> Went." },
        { q: "22. We _____ (buy) a lot of food.", opts: ["buyed", "bought", "brought"], a: "bought", exp: "Buy -> Bought." },
        { q: "23. He _____ (take) me to the cinema.", opts: ["taked", "took", "taken"], a: "took", exp: "Take -> Took." },
        { q: "24. I _____ (sleep) very well.", opts: ["sleeped", "slept", "sliped"], a: "slept", exp: "Sleep -> Slept." },
        { q: "25. She _____ (make) a cake.", opts: ["maked", "made", "make"], a: "made", exp: "Make -> Made." },
        { q: "26. We _____ (spend) 2 days there.", opts: ["spended", "spent", "spen"], a: "spent", exp: "Spend -> Spent." },
        { q: "27. I _____ (feel) sick yesterday.", opts: ["feeled", "felt", "fell"], a: "felt", exp: "Feel -> Felt." },
        { q: "28. The machine _____ (break).", opts: ["breaked", "broke", "broken"], a: "broke", exp: "Break -> Broke." },
        { q: "29. He _____ (decide) to leave.", opts: ["decided", "decid", "decides"], a: "decided", exp: "Decide -> Decided (C√≥ quy t·∫Øc)." },
        { q: "30. I _____ (see) him at the mall.", opts: ["saw", "seed", "seen"], a: "saw", exp: "See -> Saw." },

        // --- PART 4: ADVANCED ZONE (Th·ª≠ th√°ch) ---
        { q: "31. I _____ play football when I was young, but now I don't.", opts: ["use to", "used to", "was used"], a: "used to", exp: "üíé <b>Used to:</b> ƒê√£ t·ª´ng l√†m g√¨ (th√≥i quen c≈©)." },
        { q: "32. He said he _____ help me, but he didn't.", opts: ["will", "would", "can"], a: "would", exp: "üíé <b>Would:</b> Qu√° kh·ª© c·ªßa Will (S·∫Ω - trong l·ªùi k·ªÉ l·∫°i)." },
        { q: "33. We ran _____ of money halfway through the trip.", opts: ["out", "off", "over"], a: "out", exp: "üíé <b>Run out of:</b> C·∫°n ki·ªát/H·∫øt s·∫°ch (ti·ªÅn, xƒÉng...)." },
        { q: "34. ____ it rained, we still went out.", opts: ["Because", "Although", "So"], a: "Although", exp: "üíé <b>Although:</b> M·∫∑c d√π (Ch·ªâ s·ª± ƒë·ªëi l·∫≠p)." },
        { q: "35. I was exhausted _____ the long drive.", opts: ["because", "because of", "so"], a: "because of", exp: "üíé <b>Because of + Noun:</b> B·ªüi v√¨ chuy·∫øn ƒëi d√†i (Danh t·ª´)." },
        { q: "36. I haven't seen him _____ 2010.", opts: ["in", "since", "for"], a: "since", exp: "üíé <b>Since:</b> K·ªÉ t·ª´ m·ªëc th·ªùi gian (D·∫•u hi·ªáu th√¨ Ho√†n th√†nh - M·ªü r·ªông)." },
        { q: "37. By the time he arrived, I _____.", opts: ["left", "had left", "leave"], a: "had left", exp: "üíé <b>Had left:</b> Qu√° kh·ª© ho√†n th√†nh (X·∫£y ra tr∆∞·ªõc 1 h√†nh ƒë·ªông qu√° kh·ª© kh√°c)." },
        { q: "38. I'm not used to _____ up early.", opts: ["get", "getting", "got"], a: "getting", exp: "üíé <b>Be used to + V-ing:</b> Quen v·ªõi vi·ªác g√¨ ƒë√≥." },
        { q: "39. Did you _____ to go to that school?", opts: ["use", "used", "uses"], a: "use", exp: "üíé <b>Did ... use to:</b> C√¢u h·ªèi c·ªßa Used to th√¨ Use v·ªÅ nguy√™n th·ªÉ." },
        { q: "40. Choose the Natural Flow sentence:", opts: ["My health was bad.", "I was under the weather.", "I was bad health."], a: "I was under the weather.", exp: "üíé <b>Under the weather:</b> Th√†nh ng·ªØ (Idiom) ch·ªâ vi·ªác c·∫£m th·∫•y kh√¥ng kh·ªèe." }
    ];

    function startQuiz() {
        document.getElementById('start-screen').style.display = 'none';
        document.getElementById('quiz-content').style.display = 'block';
        document.getElementById('timer-bar').style.display = 'block';
        renderQuiz();
        startTimer(20 * 60);
    }

    function renderQuiz() {
        const container = document.getElementById('quiz-container');
        questions.forEach((item, index) => {
            let isBoss = index >= 30; // 10 c√¢u cu·ªëi l√† Boss
            let bossBadge = isBoss ? '<span class="boss-badge">üî• ADVANCED</span><br>' : '';
            let cardClass = isBoss ? 'question-card boss-card' : 'question-card';
            
            let html = `<div class="${cardClass}" id="card-${index}">
                ${bossBadge}
                <span class="question-text">C√¢u ${index + 1}: ${item.q}</span>
                <div class="options">`;
            
            item.opts.forEach(opt => {
                html += `<label><input type="radio" name="q${index}" value="${opt}"> ${opt}</label>`;
            });

            html += `</div><div class="feedback" id="fb-${index}"></div></div>`;
            container.innerHTML += html;
        });
    }

    function startTimer(duration) {
        let timer = duration, minutes, seconds;
        let interval = setInterval(function () {
            minutes = parseInt(timer / 60, 10);
            seconds = parseInt(timer % 60, 10);
            minutes = minutes < 10 ? "0" + minutes : minutes;
            seconds = seconds < 10 ? "0" + seconds : seconds;
            document.getElementById('time').textContent = minutes + ":" + seconds;
            if (--timer < 0) {
                clearInterval(interval);
                submitQuiz();
            }
        }, 1000);
    }

    function submitQuiz() {
        let score = 0;
        let report = "CHI TI·∫æT L·ªñI SAI:\n";
        
        questions.forEach((item, index) => {
            const selected = document.querySelector(`input[name="q${index}"]:checked`);
            const fb = document.getElementById(`fb-${index}`);
            fb.style.display = 'block';

            if (selected && selected.value === item.a) {
                score++;
                fb.innerHTML = `<span class="correct">‚úÖ Ch√≠nh x√°c!</span> ${item.exp}`;
                document.getElementById(`card-${index}`).style.borderLeftColor = "#2a9d8f";
            } else {
                let userAns = selected ? selected.value : "Ch∆∞a ch·ªçn";
                fb.innerHTML = `<span class="wrong">‚ùå Sai r·ªìi.</span> ƒê√°p √°n: <b>${item.a}</b><br>üí° ${item.exp}`;
                document.getElementById(`card-${index}`).style.borderLeftColor = "#d00000";
                report += `C√¢u ${index + 1}: B·∫°n ch·ªçn '${userAns}' -> ƒê√°p √°n ƒë√∫ng: '${item.a}'\n`;
            }
        });

        document.getElementById('score-display').innerText = `ƒêI·ªÇM S·ªê: ${score} / 40`;
        document.getElementById('final-report').value = score === 40 ? "XU·∫§T S·∫ÆC! KH√îNG SAI C√ÇU N√ÄO!" : report;
        document.getElementById('report-area').style.display = 'block';
        window.scrollTo(0, document.body.scrollHeight);
    }
</script>
</body>
</html>