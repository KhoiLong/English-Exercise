<!DOCTYPE html>
<html lang="vi">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Writing Coach: FINAL BOSS BATTLE</title>
<style>
    :root {
        --primary: #7209b7; /* T√≠m tr√πm cu·ªëi */
        --secondary: #3a0ca3;
        --accent: #f72585; /* H·ªìng neon */
        --bg: #f8f9fa;
        --text: #333;
    }
    body {
        font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
        background-color: var(--bg);
        color: var(--text);
        line-height: 1.6;
        margin: 0;
        padding: 20px;
        padding-top: 70px;
    }
    .container {
        max-width: 800px;
        margin: 0 auto;
        background: white;
        padding: 30px;
        border-radius: 15px;
        box-shadow: 0 4px 15px rgba(0,0,0,0.1);
        display: none;
    }
    
    /* START SCREEN */
    #start-screen {
        max-width: 600px;
        margin: 50px auto;
        background: white;
        padding: 40px;
        border-radius: 15px;
        text-align: center;
        border: 2px solid var(--primary);
        box-shadow: 0 10px 25px rgba(114, 9, 183, 0.2);
    }
    .btn-start {
        background: var(--primary);
        color: white;
        border: none;
        padding: 20px 40px;
        font-size: 1.5em;
        font-weight: bold;
        border-radius: 50px;
        cursor: pointer;
        transition: transform 0.2s;
        box-shadow: 0 4px 15px rgba(114, 9, 183, 0.4);
    }
    .btn-start:hover { transform: scale(1.05); background: var(--secondary); }

    /* Sticky Timer */
    #timer-bar {
        position: fixed;
        top: 0;
        left: 0;
        width: 100%;
        background: var(--secondary);
        color: white;
        text-align: center;
        padding: 15px 0;
        font-size: 1.5em;
        font-weight: bold;
        z-index: 1000;
        display: none;
    }
    .warning { background-color: var(--accent) !important; animation: pulse 0.5s infinite; }
    
    @keyframes pulse {
        0% { transform: scale(1); }
        50% { transform: scale(1.02); }
        100% { transform: scale(1); }
    }

    h1 { color: var(--secondary); text-align: center; border-bottom: 2px solid var(--accent); padding-bottom: 10px; }
    
    .question-card {
        background: #fff;
        border: 1px solid #ddd;
        border-left: 6px solid var(--primary);
        padding: 20px;
        margin-bottom: 20px;
        border-radius: 8px;
    }
    .question-text { font-weight: bold; font-size: 1.15em; margin-bottom: 15px; display: block; }
    
    .options label {
        display: block;
        margin-bottom: 10px;
        cursor: pointer;
        padding: 12px;
        background: #f8f9fa;
        border-radius: 6px;
        border: 1px solid #eee;
        transition: 0.2s;
    }
    .options label:hover { background: #e0aaff; border-color: var(--primary); }
    .options input[type="radio"] { margin-right: 10px; transform: scale(1.2); }

    /* Explanation Styles */
    .explanation-box {
        margin-top: 15px;
        padding: 15px;
        background-color: #ede9fe;
        border-radius: 5px;
        border-left: 4px solid var(--accent);
        display: none;
    }
    .correct-text { color: #008000; font-weight: bold; }
    .wrong-text { color: #d00000; font-weight: bold; }

    .btn-submit {
        display: block;
        width: 100%;
        padding: 15px;
        background: var(--accent);
        color: white;
        border: none;
        border-radius: 8px;
        font-size: 1.2em;
        cursor: pointer;
        margin-top: 30px;
        font-weight: bold;
    }
    .btn-submit:hover { background: #c9184a; }
    
    /* REPORT */
    #report-section {
        display: none;
        margin-top: 30px;
        padding: 20px;
        background: #f3f4f6;
        border: 2px dashed var(--secondary);
    }
    textarea#final-report {
        width: 100%;
        height: 250px;
        font-family: monospace;
        padding: 10px;
        border: 1px solid #ccc;
        margin-bottom: 10px;
    }
</style>
</head>
<body>

<div id="start-screen">
    <h1>üëæ FINAL BOSS BATTLE</h1>
    <p>Ch√†o m·ª´ng ƒë·∫øn v·ªõi c·ª≠a ·∫£i cu·ªëi c√πng!</p>
    <p>ƒê√¢y l√† 15 c√¢u h·ªèi <b>"Hack N√£o"</b> nh·∫•t.</p>
    <p><i>C·∫£nh b√°o: ƒê·ª´ng tin v√†o m·∫Øt, h√£y tin v√†o logic.</i></p>
    <p>Th·ªùi gian: <b>15 ph√∫t</b></p>
    <button class="btn-start" onclick="startQuiz()">CHI·∫æN TH√îI!</button>
</div>

<div id="timer-bar">Th·ªùi gian c√≤n l·∫°i: <span id="time">15:00</span></div>

<div class="container" id="quiz-content">
    <h1>‚öîÔ∏è Tr·∫≠n Chi·∫øn Cu·ªëi C√πng</h1>
    <div id="quiz-container"></div>
    <button class="btn-submit" onclick="submitQuiz()">Tung Chi√™u Cu·ªëi (N·ªôp B√†i)</button>
    
    <div id="report-section">
        <h3>üìä K·∫øt Qu·∫£ Tr·∫≠n ƒê·∫•u</h3>
        <textarea id="final-report" readonly></textarea>
    </div>
</div>

<script>
    const questions = [
        // B·∫´y ƒê·∫£o Ng·ªØ & There is/are
        { 
            q: "1. There _____ a book and two pens on the table.", 
            opts: ["is", "are", "be"], 
            a: "is", 
            exp: "‚ò†Ô∏è <b>B·∫´y 'There':</b> V·ªõi c·∫•u tr√∫c 'There is/are', ƒë·ªông t·ª´ chia theo danh t·ª´ G·∫¶N NH·∫§T. G·∫ßn nh·∫•t l√† 'a book' (s·ªë √≠t) -> d√πng IS. (D√π ph√≠a sau c√≥ 2 pens k·ªá n√≥)." 
        },
        { 
            q: "2. Under the tree _____ three dogs.", 
            opts: ["stand", "stands", "standing"], 
            a: "stand", 
            exp: "‚ò†Ô∏è <b>B·∫´y ƒê·∫£o Ng·ªØ:</b> Ch·ªß ng·ªØ th·∫≠t s·ª± l√† 'three dogs' (n·∫±m cu·ªëi c√¢u) -> S·ªë nhi·ªÅu -> STAND (gi·ªØ nguy√™n). 'Under the tree' ch·ªâ l√† tr·∫°ng t·ª´ ch·ªâ n∆°i ch·ªën." 
        },
        
        // B·∫´y M·ªánh ƒê·ªÅ Quan H·ªá (L·ªìng gh√©p)
        { 
            q: "3. The woman who _____ next door _____ a doctor.", 
            opts: ["live / is", "lives / are", "lives / is"], 
            a: "lives / is", 
            exp: "‚ò†Ô∏è <b>B·∫´y L·ªìng Gh√©p:</b> C·∫£ 2 ƒë·ªông t·ª´ ƒë·ªÅu chia theo 'The woman' (s·ªë √≠t). 'The woman lives...' v√† 'The woman is...'" 
        },
        { 
            q: "4. The cars which _____ parked outside _____ to me.", 
            opts: ["is / belong", "are / belongs", "are / belong"], 
            a: "are / belong", 
            exp: "‚ò†Ô∏è <b>Logic:</b> 'The cars' (s·ªë nhi·ªÅu) -> are parked. V√† 'The cars' (s·ªë nhi·ªÅu) -> belong (gi·ªØ nguy√™n)." 
        },

        // B·∫´y Ch·ªß Ng·ªØ Ph·ª©c T·∫°p
        { 
            q: "5. Either you or I _____ responsible for this.", 
            opts: ["am", "are", "is"], 
            a: "am", 
            exp: "‚ò†Ô∏è <b>Quy t·∫Øc 'Ho·∫∑c':</b> V·ªõi 'Either... or...', ƒë·ªông t·ª´ chia theo ch·ªß ng·ªØ G·∫¶N NH·∫§T. G·∫ßn nh·∫•t l√† 'I' -> d√πng AM." 
        },
        { 
            q: "6. Neither the teacher nor the students _____ the answer.", 
            opts: ["know", "knows", "knowing"], 
            a: "know", 
            exp: "‚ò†Ô∏è <b>Quy t·∫Øc 'Kh√¥ng ai':</b> T∆∞∆°ng t·ª±, chia theo g·∫ßn nh·∫•t l√† 'students' (s·ªë nhi·ªÅu) -> KNOW (gi·ªØ nguy√™n)." 
        },
        { 
            q: "7. Making friends _____ easier than keeping them.", 
            opts: ["is", "are", "be"], 
            a: "is", 
            exp: "‚ò†Ô∏è <b>B·∫´y V-ing:</b> Ch·ªß ng·ªØ l√† h√†nh ƒë·ªông 'Making' (s·ªë √≠t) -> IS. ƒê·ª´ng nh√¨n ch·ªØ 'friends' m√† b·ªã l·ª´a!" 
        },

        // B·∫´y ƒê·∫°i T·ª´ & S·ªë L∆∞·ª£ng
        { 
            q: "8. Each of the students _____ a unique talent.", 
            opts: ["have", "has", "having"], 
            a: "has", 
            exp: "‚ò†Ô∏è <b>B·∫´y 'Each':</b> 'Each' (M·ªói m·ªôt ng∆∞·ªùi) lu√¥n lu√¥n l√† s·ªë √≠t -> HAS. D√π ph√≠a sau l√† 'students'." 
        },
        { 
            q: "9. A number of students _____ absent today.", 
            opts: ["is", "are", "be"], 
            a: "are", 
            exp: "‚ò†Ô∏è <b>Ph√¢n bi·ªát:</b> 'A number of' = Many (Nhi·ªÅu) -> S·ªë nhi·ªÅu -> ARE. (Kh√°c v·ªõi 'The number of' l√† s·ªë √≠t)." 
        },
        { 
            q: "10. Two-thirds of the cake _____ eaten.", 
            opts: ["was", "were", "be"], 
            a: "was", 
            exp: "‚ò†Ô∏è <b>B·∫´y Ph√¢n S·ªë:</b> V·ªõi ph√¢n s·ªë, ta nh√¨n danh t·ª´ sau 'of'. 'The cake' (s·ªë √≠t/kh√¥ng ƒë·∫øm ƒë∆∞·ª£c) -> WAS." 
        },
        { 
            q: "11. Two-thirds of the students _____ boys.", 
            opts: ["is", "are", "be"], 
            a: "are", 
            exp: "‚ò†Ô∏è <b>B·∫´y Ph√¢n S·ªë (2):</b> Nh√¨n sau 'of' th·∫•y 'students' (s·ªë nhi·ªÅu) -> ARE." 
        },

        // B·∫´y T√™n Ri√™ng & T·∫≠p H·ª£p
        { 
            q: "12. 'Romeo and Juliet' _____ a classic play.", 
            opts: ["is", "are", "be"], 
            a: "is", 
            exp: "‚ò†Ô∏è <b>B·∫´y T√™n Ri√™ng:</b> ƒê√¢y l√† T√äN c·ªßa 1 v·ªü k·ªãch (d√π c√≥ 'and') -> S·ªë √≠t -> IS." 
        },
        { 
            q: "13. The police _____ looking for the thief.", 
            opts: ["is", "are", "be"], 
            a: "are", 
            exp: "‚ò†Ô∏è <b>Ngo·∫°i l·ªá:</b> 'The police' (C·∫£nh s√°t n√≥i chung) lu√¥n ƒë∆∞·ª£c t√≠nh l√† s·ªë nhi·ªÅu -> ARE." 
        },
        { 
            q: "14. Ten kilometers _____ a long way to walk.", 
            opts: ["is", "are", "be"], 
            a: "is", 
            exp: "‚ò†Ô∏è <b>Kho·∫£ng c√°ch:</b> Kho·∫£ng c√°ch, th·ªùi gian, ti·ªÅn b·∫°c lu√¥n l√† s·ªë √≠t -> IS." 
        },
        { 
            q: "15. What I need _____ a new computer.", 
            opts: ["is", "are", "am"], 
            a: "is", 
            exp: "‚ò†Ô∏è <b>M·ªánh ƒë·ªÅ danh ng·ªØ:</b> C·∫£ c·ª•m 'What I need' (C√°i ƒëi·ªÅu t√¥i c·∫ßn) ƒë√≥ng vai tr√≤ l√† ch·ªß ng·ªØ s·ªë √≠t -> IS." 
        }
    ];

    let timerInterval;
    let totalTime = 15 * 60; 

    function startQuiz() {
        document.getElementById('start-screen').style.display = 'none';
        document.getElementById('quiz-content').style.display = 'block';
        document.getElementById('timer-bar').style.display = 'block';
        
        const container = document.getElementById('quiz-container');
        questions.forEach((item, index) => {
            let optionsHTML = '';
            item.opts.forEach(opt => {
                optionsHTML += `<label><input type="radio" name="q${index}" value="${opt}"> ${opt}</label>`;
            });

            container.innerHTML += `
                <div class="question-card" id="card-${index}">
                    <span class="question-text">${item.q}</span>
                    <div class="options">${optionsHTML}</div>
                    <div class="explanation-box" id="exp-${index}">
                        ${item.exp}
                    </div>
                </div>
            `;
        });
        startTimer(totalTime);
    }

    function startTimer(duration) {
        let timer = duration, minutes, seconds;
        const display = document.getElementById('time');
        const timerBar = document.getElementById('timer-bar');

        timerInterval = setInterval(function () {
            minutes = parseInt(timer / 60, 10);
            seconds = parseInt(timer % 60, 10);
            minutes = minutes < 10 ? "0" + minutes : minutes;
            seconds = seconds < 10 ? "0" + seconds : seconds;
            display.textContent = minutes + ":" + seconds;

            if (timer < 60) timerBar.classList.add('warning');
            if (--timer < 0) {
                clearInterval(timerInterval);
                submitQuiz();
            }
        }, 1000);
    }

    function submitQuiz() {
        clearInterval(timerInterval);
        let score = 0;
        let reportText = `üëæ K·∫æT QU·∫¢ FINAL BOSS BATTLE\n--------------------------\n`;
        
        questions.forEach((item, index) => {
            const selected = document.querySelector(`input[name="q${index}"]:checked`);
            const expBox = document.getElementById(`exp-${index}`);
            expBox.style.display = 'block';

            let userAnswer = selected ? selected.value : "B·ªè tr·ªëng";

            if (selected && selected.value === item.a) {
                score++;
                expBox.innerHTML = `<span class="correct-text">‚úÖ CH√çNH X√ÅC!</span><br>` + expBox.innerHTML;
                document.getElementById(`card-${index}`).style.borderLeftColor = "#008000";
            } else {
                expBox.innerHTML = `<span class="wrong-text">‚ùå D√çNH B·∫™Y R·ªíI! ƒê√°p √°n: ${item.a}</span><br>` + expBox.innerHTML;
                document.getElementById(`card-${index}`).style.borderLeftColor = "#d00000";
                
                reportText += `‚ùå C√¢u ${index + 1}: ${userAnswer} (Sai). ƒê√°p √°n: ${item.a}\n`;
            }
        });

        reportText = `üèÜ ƒêI·ªÇM S·ªê: ${score} / 15\n\n` + reportText;
        if(score >= 13) reportText += `\nüåü ƒê√ÅNH GI√Å: TUY·ªÜT ƒê·ªêI! V·ª£ ƒë√£ ph√° ƒë·∫£o game n√†y!`;
        else if(score >= 10) reportText += `\nüòé ƒê√ÅNH GI√Å: R·∫•t gi·ªèi! Ch·ªâ d√≠nh v√†i b·∫´y nh·ªè.`;
        else reportText += `\nüíÄ ƒê√ÅNH GI√Å: Boss h∆°i m·∫°nh. C·∫ßn luy·ªán th√™m logic n√¢ng cao!`;

        const reportArea = document.getElementById('report-section');
        document.getElementById('final-report').value = reportText;
        reportArea.style.display = 'block';
        document.querySelector('.btn-submit').remove();
        document.getElementById('timer-bar').style.display = 'none';
        reportArea.scrollIntoView({behavior: "smooth"});
    }
</script>
</body>
</html>